<%= labelled_fields_for :checklist, checklist do |f| %>

<div class="splitcontent">
  <div class="splitcontentleft">
    <% if checklist.safe_attribute?('status_id') && allowed_statuses.present? %>
      <p>
        <%= f.select :status_id, (allowed_statuses.collect {|p| [p.name, p.id]}), {:required => true} %>
      </p>
      <%= hidden_field_tag 'was_default_status', checklist.status_id, :id => nil if checklist.status == checklist.default_status %>
    <% else %>
      <p><label><%= l(:field_status) %></label> <%= checklist.status %></p>
    <% end %>

    <% if checklist.safe_attribute?('importance') %>
      <p>
        <%= f.select :importance, checklist.importance_select_options,
          {:required => checklist.required_attribute?('importance')} %>
      </p>
    <% end %>

    <% if checklist.safe_attribute? 'priority_id' %>
      <p><%= f.select :priority_id, (priorities.collect {|p| [p.name, p.id]}), {:required => true} %></p>
    <% end %>

    <% if checklist.safe_attribute? 'assigned_to_id' %>
      <p>
        <%= f.select :assigned_to_id, principals_options_for_select(checklist.assignable_users, checklist.assigned_to),
          :include_blank => true, :required => checklist.required_attribute?('assigned_to_id') %>
      </p>
    <% end %>
  </div>

  <div class="splitcontentright">
    <% if checklist.safe_attribute? 'start_date' %>
    <p id="start_date_area">
      <%= f.date_field(:start_date, :size => 10, :required => checklist.required_attribute?('start_date')) %>
      <%= calendar_for('issue_start_date') %>
    </p>
    <% end %>

    <% if checklist.safe_attribute? 'due_date' %>
    <p id="due_date_area">
      <%= f.date_field(:due_date, :size => 10, :required => checklist.required_attribute?('due_date')) %>
      <%= calendar_for('issue_due_date') %>
    </p>
    <% end %>

    <% if checklist.safe_attribute? 'estimated_hours' %>
    <p><%= f.hours_field :estimated_hours, :size => 10, :required => checklist.required_attribute?('estimated_hours') %> <%= l(:field_hours) %></p>
    <% end %>

    <% if checklist.safe_attribute?('done_ratio') && Issue.use_field_for_done_ratio? %>
    <p><%= f.select :done_ratio, ((0..10).to_a.collect {|r| ["#{r*10} %", r*10] }), :required => checklist.required_attribute?('done_ratio') %></p>
    <% end %>
  </div>
</div>

<% if checklist.safe_attribute? 'custom_field_values' %>
  <%= render :partial => 'checklists/form_custom_fields', :locals => { :checklist => checklist } %>
<% end %>

<% end %>

<% include_calendar_headers_tags %>
